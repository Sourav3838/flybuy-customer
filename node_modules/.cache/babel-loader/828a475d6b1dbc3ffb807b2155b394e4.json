{"ast":null,"code":"var _jsxFileName = \"F:\\\\flybuy-customer\\\\src\\\\components\\\\pages\\\\Upload\\\\index.jsx\";\nimport { Button, message } from 'antd';\nimport React, { useState } from 'react';\nimport axios from '../../../axios';\nimport { UploadOutlined } from '@ant-design/icons';\nexport default function Upload({\n  setImageURL\n}) {\n  const [fileInputState, setFileInputState] = useState('');\n  const [previewSource, setPreviewSource] = useState('');\n  const [selectedFile, setSelectedFile] = useState();\n\n  const handleFileInputChange = e => {\n    const file = e.target.files[0];\n    previewFile(file);\n    setSelectedFile(file);\n    setFileInputState(e.target.value);\n  };\n\n  const previewFile = file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      setPreviewSource(reader.result);\n    };\n  };\n\n  const handleSubmitFile = e => {\n    console.log('hfkjewhfkj');\n    e.preventDefault();\n    if (!selectedFile) return;\n    const reader = new FileReader();\n    reader.readAsDataURL(selectedFile);\n\n    reader.onloadend = () => {\n      uploadImage(reader.result);\n    };\n\n    reader.onerror = () => {\n      console.error('AHHHHHHHH!!');\n    };\n  };\n\n  const uploadImage = async base64EncodedImage => {\n    try {\n      await axios.post('/api/upload', {\n        base64EncodedImage\n      }).then(res => {\n        console.log(res);\n        setImageURL(res === null || res === void 0 ? void 0 : res.data);\n      });\n      setFileInputState('');\n      setPreviewSource('');\n      message.success('Image uploaded successfuly');\n    } catch (err) {\n      message.error('Failed image uploading!!');\n      console.log(`err`, err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }\n  }, \"Upload an Image\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmitFile,\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"fileInput\",\n    type: \"file\",\n    name: \"image\",\n    accept: \".jpg ,.png\",\n    onChange: handleFileInputChange,\n    value: fileInputState,\n    className: \"form-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn\",\n    type: \"primary\",\n    onClick: handleSubmitFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(UploadOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }), \" Upload\"))), previewSource && /*#__PURE__*/React.createElement(\"img\", {\n    src: previewSource,\n    alt: \"chosen\",\n    style: {\n      height: '300px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 22\n    }\n  }));\n}","map":{"version":3,"sources":["F:/flybuy-customer/src/components/pages/Upload/index.jsx"],"names":["Button","message","React","useState","axios","UploadOutlined","Upload","setImageURL","fileInputState","setFileInputState","previewSource","setPreviewSource","selectedFile","setSelectedFile","handleFileInputChange","e","file","target","files","previewFile","value","reader","FileReader","readAsDataURL","onloadend","result","handleSubmitFile","console","log","preventDefault","uploadImage","onerror","error","base64EncodedImage","post","then","res","data","success","err","height"],"mappings":"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","sourcesContent":["import { Button, message } from 'antd';\r\nimport React, { useState } from 'react';\r\nimport axios from '../../../axios';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\n\r\nexport default function Upload({ setImageURL }) {\r\n\tconst [fileInputState, setFileInputState] = useState('');\r\n\tconst [previewSource, setPreviewSource] = useState('');\r\n\tconst [selectedFile, setSelectedFile] = useState();\r\n\tconst handleFileInputChange = (e) => {\r\n\t\tconst file = e.target.files[0];\r\n\t\tpreviewFile(file);\r\n\t\tsetSelectedFile(file);\r\n\t\tsetFileInputState(e.target.value);\r\n\t};\r\n\r\n\tconst previewFile = (file) => {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\tsetPreviewSource(reader.result);\r\n\t\t};\r\n\t};\r\n\r\n\tconst handleSubmitFile = (e) => {\r\n\t\tconsole.log('hfkjewhfkj');\r\n\t\te.preventDefault();\r\n\t\tif (!selectedFile) return;\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(selectedFile);\r\n\t\treader.onloadend = () => {\r\n\t\t\tuploadImage(reader.result);\r\n\t\t};\r\n\t\treader.onerror = () => {\r\n\t\t\tconsole.error('AHHHHHHHH!!');\r\n\t\t};\r\n\t};\r\n\r\n\tconst uploadImage = async (base64EncodedImage) => {\r\n\t\ttry {\r\n\t\t\tawait axios\r\n\t\t\t\t.post('/api/upload', {\r\n\t\t\t\t\tbase64EncodedImage,\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tsetImageURL(res?.data);\r\n\t\t\t\t});\r\n\t\t\tsetFileInputState('');\r\n\t\t\tsetPreviewSource('');\r\n\t\t\tmessage.success('Image uploaded successfuly');\r\n\t\t} catch (err) {\r\n\t\t\tmessage.error('Failed image uploading!!');\r\n\t\t\tconsole.log(`err`, err);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1 className=\"title\">Upload an Image</h1>\r\n\t\t\t<form onSubmit={handleSubmitFile} className=\"form\">\r\n\t\t\t\t<div className=\"flex space-between\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid=\"fileInput\"\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tname=\"image\"\r\n\t\t\t\t\t\taccept=\".jpg ,.png\"\r\n\t\t\t\t\t\tonChange={handleFileInputChange}\r\n\t\t\t\t\t\tvalue={fileInputState}\r\n\t\t\t\t\t\tclassName=\"form-input\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button className=\"btn\" type=\"primary\" onClick={handleSubmitFile}>\r\n\t\t\t\t\t\t<UploadOutlined /> Upload\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t\t{previewSource && <img src={previewSource} alt=\"chosen\" style={{ height: '300px' }} />}\r\n\t\t</div>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}