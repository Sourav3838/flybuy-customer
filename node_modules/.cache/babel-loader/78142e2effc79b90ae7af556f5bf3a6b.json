{"ast":null,"code":"var _jsxFileName = \"F:\\\\flybuy-customer\\\\src\\\\components\\\\pages\\\\Cart\\\\index.jsx\";\n\n/* eslint-disable no-unused-expressions */\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { Card, Avatar, Row, Col, Tooltip, Tag, Carousel, message, Result, Button, Badge, Skeleton } from 'antd';\nimport { EyeOutlined, StarTwoTone, CheckCircleTwoTone, PlusCircleOutlined, PlusCircleTwoTone, MinusCircleTwoTone } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport StripePayment from '../StripePayment';\nimport axios from '../../../axios';\n\nconst Cart = ({\n  currentUser,\n  setCurrentUser,\n  setCartValue\n}) => {\n  let history = useHistory();\n  const [cartList, setCartList] = useState([]);\n  const [totalValue, setTotalValue] = useState([]);\n  const [loading, setLoading] = useState({});\n  const [offersLength, setOffersLength] = useState(0);\n  const [finalClientSecret, setFinalClientSecret] = useState();\n  const {\n    Meta\n  } = Card;\n  const {\n    userId\n  } = useParams();\n\n  async function getCartProducts(id) {\n    console.log(`cart product`);\n    console.log(`userId`, userId);\n    const response = await axios.get(`/user/${userId}/cart`);\n\n    if (response) {\n      setCartList(response === null || response === void 0 ? void 0 : response.data);\n      if (id) setLoading({\n        [id]: false\n      });\n    }\n  }\n\n  console.log(`totalValue`, totalValue);\n  console.log(`cartList`, cartList);\n\n  async function emptyCart() {\n    console.log(`to empty`);\n    const response = await axios.get(`/cart/${userId}/empty`);\n\n    if (response) {\n      setCartValue(0);\n      message.success('Order created successfully');\n      history.replace(`/order/user/${userId}`);\n    } else {\n      console.log(`no response`);\n    }\n  }\n\n  async function getOrders() {\n    const req = await axios.get(`/orders/all?user=${userId}`);\n\n    if (req) {\n      var _req$data;\n\n      setOffersLength(req === null || req === void 0 ? void 0 : (_req$data = req.data) === null || _req$data === void 0 ? void 0 : _req$data.length);\n    }\n  }\n\n  useEffect(() => {\n    if (userId) {\n      getCartProducts();\n      getOrders();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [userId]);\n\n  async function createOrder(data) {\n    console.log(`create a new order`);\n    await axios.post('/order/create', data).then(res => {\n      var _res$data;\n\n      if (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message) {\n        console.log(`here`);\n        emptyCart();\n      }\n    });\n  }\n\n  console.log(`cartList`, cartList);\n\n  async function increaseQuantity(id) {\n    setLoading({\n      [id]: true\n    });\n    await axios.put(`/product/${id}/user/${userId}/quantity/cart?action=inc`).then(res => {\n      if (res) {\n        console.log(`here`, res === null || res === void 0 ? void 0 : res.data);\n        getCartProducts(id);\n      }\n    });\n  }\n\n  async function decreaseQuantity(id) {\n    setLoading({\n      [id]: true\n    });\n    await axios.put(`/product/${id}/user/${userId}/quantity/cart?action=desc`).then(res => {\n      if (res) {\n        console.log(`here`, res === null || res === void 0 ? void 0 : res.data);\n        getCartProducts(id);\n      }\n    });\n  }\n\n  async function removeFromCart(id) {\n    setLoading({\n      [id]: true\n    });\n    await axios.delete(`/product/${id}/user/${userId}/remove/cart`).then(res => {\n      if (res) {\n        console.log(`here`, res === null || res === void 0 ? void 0 : res.data);\n        message.success('Product removed from the cart successfully');\n        getCartProducts(id);\n      }\n    });\n  }\n\n  useEffect(() => {\n    var _JSON$parse;\n\n    if (finalClientSecret) console.log(`finalClientSecret`, finalClientSecret);\n    const data = {\n      userId: (_JSON$parse = JSON.parse(localStorage.getItem('user'))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse._id,\n      paymentId: finalClientSecret,\n      productsList: cartList,\n      amount: totalValue,\n      status: 'PENDING',\n      admin_staus_comment: 'PENDING',\n      is_delivered: 'N'\n    };\n    console.log(`data to add order`, data);\n    createOrder(data);\n  }, [finalClientSecret]);\n  useEffect(() => {\n    const totalPrice = cartList.reduce(function (total, array) {\n      var _array$product, _array$product2;\n\n      if (offersLength === 0) return parseInt((total + parseInt(array === null || array === void 0 ? void 0 : (_array$product = array.product) === null || _array$product === void 0 ? void 0 : _array$product.product_price) * parseInt(array === null || array === void 0 ? void 0 : array.quantity)) * 0.15) / 0.15;\n      return total + parseInt(array === null || array === void 0 ? void 0 : (_array$product2 = array.product) === null || _array$product2 === void 0 ? void 0 : _array$product2.product_price) * parseInt(array === null || array === void 0 ? void 0 : array.quantity);\n    }, 0);\n    setTotalValue(totalPrice);\n  }, [cartList]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white shadow rounded-lg p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 3\n    }\n  }, (cartList === null || cartList === void 0 ? void 0 : cartList.length) > 0 ? /*#__PURE__*/React.createElement(Row, {\n    gutter: [24, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xl: 8,\n    lg: 8,\n    md: 8,\n    sm: 12,\n    xs: 12,\n    style: {\n      maxHeight: '530px',\n      overflow: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 6\n    }\n  }, cartList === null || cartList === void 0 ? void 0 : cartList.map(item => {\n    var _item$product2, _item$product2$ImageU, _item$product3, _item$product3$ImageU, _item$product4, _item$product4$ImageU, _item$product5, _item$product5$ImageU, _item$product6, _item$product6$ImageU, _item$product7, _item$product7$ImageU, _item$product8, _item$product8$ImageU, _item$product9, _item$product9$ImageU, _item$product10, _item$product10$Image, _item$product11, _item$product11$Image, _item$product12, _item$product15, _item$product16, _item$product17, _item$product18, _item$product19, _item$product19$produ, _item$product20;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"m-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Badge.Ribbon, {\n      className: \"cursor-pointer\",\n      text: /*#__PURE__*/React.createElement(\"span\", {\n        onClick: () => {\n          var _item$product;\n\n          console.log(`1`, 1);\n          removeFromCart(item === null || item === void 0 ? void 0 : (_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }\n      }, \"Remove\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      style: {\n        width: 300,\n        margin: '10%',\n        boxShadow: '10px 14px 18px #00ff66'\n      },\n      cover: /*#__PURE__*/React.createElement(Carousel, {\n        autoplay: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 12\n        }\n      }, (item === null || item === void 0 ? void 0 : (_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : (_item$product2$ImageU = _item$product2.ImageURLOne) === null || _item$product2$ImageU === void 0 ? void 0 : _item$product2$ImageU.url) && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 300,\n          height: 300\n        },\n        alt: \"example\",\n        src: item === null || item === void 0 ? void 0 : (_item$product3 = item.product) === null || _item$product3 === void 0 ? void 0 : (_item$product3$ImageU = _item$product3.ImageURLOne) === null || _item$product3$ImageU === void 0 ? void 0 : _item$product3$ImageU.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }\n      })), (item === null || item === void 0 ? void 0 : (_item$product4 = item.product) === null || _item$product4 === void 0 ? void 0 : (_item$product4$ImageU = _item$product4.ImageURLTwo) === null || _item$product4$ImageU === void 0 ? void 0 : _item$product4$ImageU.url) && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 300,\n          height: 300\n        },\n        alt: \"example\",\n        src: item === null || item === void 0 ? void 0 : (_item$product5 = item.product) === null || _item$product5 === void 0 ? void 0 : (_item$product5$ImageU = _item$product5.ImageURLTwo) === null || _item$product5$ImageU === void 0 ? void 0 : _item$product5$ImageU.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      })), (item === null || item === void 0 ? void 0 : (_item$product6 = item.product) === null || _item$product6 === void 0 ? void 0 : (_item$product6$ImageU = _item$product6.ImageURLThree) === null || _item$product6$ImageU === void 0 ? void 0 : _item$product6$ImageU.url) && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 300,\n          height: 300\n        },\n        alt: \"example\",\n        src: item === null || item === void 0 ? void 0 : (_item$product7 = item.product) === null || _item$product7 === void 0 ? void 0 : (_item$product7$ImageU = _item$product7.ImageURLThree) === null || _item$product7$ImageU === void 0 ? void 0 : _item$product7$ImageU.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }\n      })), (item === null || item === void 0 ? void 0 : (_item$product8 = item.product) === null || _item$product8 === void 0 ? void 0 : (_item$product8$ImageU = _item$product8.ImageURLFour) === null || _item$product8$ImageU === void 0 ? void 0 : _item$product8$ImageU.url) && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 300,\n          height: 300\n        },\n        alt: \"example\",\n        src: item === null || item === void 0 ? void 0 : (_item$product9 = item.product) === null || _item$product9 === void 0 ? void 0 : (_item$product9$ImageU = _item$product9.ImageURLFour) === null || _item$product9$ImageU === void 0 ? void 0 : _item$product9$ImageU.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }\n      })), (item === null || item === void 0 ? void 0 : (_item$product10 = item.product) === null || _item$product10 === void 0 ? void 0 : (_item$product10$Image = _item$product10.ImageURLFive) === null || _item$product10$Image === void 0 ? void 0 : _item$product10$Image.url) && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 300,\n          height: 300\n        },\n        alt: \"example\",\n        src: item === null || item === void 0 ? void 0 : (_item$product11 = item.product) === null || _item$product11 === void 0 ? void 0 : (_item$product11$Image = _item$product11.ImageURLFive) === null || _item$product11$Image === void 0 ? void 0 : _item$product11$Image.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 15\n        }\n      }))),\n      actions: [/*#__PURE__*/React.createElement(Tooltip, {\n        title: item === null || item === void 0 ? void 0 : (_item$product12 = item.product) === null || _item$product12 === void 0 ? void 0 : _item$product12.product_rating,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(StarTwoTone, {\n        key: \"rating\",\n        twoToneColor: \"yellow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(PlusCircleTwoTone, {\n        twoToneColor: \"limegreen\",\n        onClick: () => {\n          var _item$product13;\n\n          increaseQuantity(item === null || item === void 0 ? void 0 : (_item$product13 = item.product) === null || _item$product13 === void 0 ? void 0 : _item$product13._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 12\n        }\n      }), /*#__PURE__*/React.createElement(MinusCircleTwoTone, {\n        twoToneColor: \"red\",\n        onClick: () => {\n          var _item$product14;\n\n          decreaseQuantity(item === null || item === void 0 ? void 0 : (_item$product14 = item.product) === null || _item$product14 === void 0 ? void 0 : _item$product14._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 12\n        }\n      }), /*#__PURE__*/React.createElement(Link, {\n        to: `/product/${item === null || item === void 0 ? void 0 : item._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(EyeOutlined, {\n        key: \"ellipsis\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }))],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(Meta, {\n      avatar: /*#__PURE__*/React.createElement(Skeleton, {\n        loading: loading[item === null || item === void 0 ? void 0 : (_item$product15 = item.product) === null || _item$product15 === void 0 ? void 0 : _item$product15._id],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Badge, {\n        count: item === null || item === void 0 ? void 0 : item.quantity,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        style: {\n          color: 'black',\n          backgroundColor: '#00ff66'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"capitalize\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 16\n        }\n      }, \"INR \", item === null || item === void 0 ? void 0 : (_item$product16 = item.product) === null || _item$product16 === void 0 ? void 0 : _item$product16.product_price)))),\n      title: /*#__PURE__*/React.createElement(Skeleton, {\n        loading: loading[item === null || item === void 0 ? void 0 : (_item$product17 = item.product) === null || _item$product17 === void 0 ? void 0 : _item$product17._id],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-full flex justify-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }\n      }, item === null || item === void 0 ? void 0 : (_item$product18 = item.product) === null || _item$product18 === void 0 ? void 0 : _item$product18.product_name), ' ', /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 15\n        }\n      }, item === null || item === void 0 ? void 0 : (_item$product19 = item.product) === null || _item$product19 === void 0 ? void 0 : (_item$product19$produ = _item$product19.product_category) === null || _item$product19$produ === void 0 ? void 0 : _item$product19$produ.map(category => {\n        let color = category.length === 5 ? 'geekblue' : 'green';\n\n        if (category === 'Children') {\n          color = 'volcano';\n        }\n\n        if (category === 'Home Accessories') {\n          color = 'Yellow';\n        }\n\n        return /*#__PURE__*/React.createElement(Tag, {\n          color: color,\n          key: category,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 18\n          }\n        }, category.toUpperCase());\n      })))),\n      description: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"truncate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }\n      }, item === null || item === void 0 ? void 0 : (_item$product20 = item.product) === null || _item$product20 === void 0 ? void 0 : _item$product20.product_description),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }\n    }))));\n  })), /*#__PURE__*/React.createElement(Col, {\n    xl: 14,\n    lg: 14,\n    md: 14,\n    sm: 12,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 6\n    }\n  }, offersLength === 0 && /*#__PURE__*/React.createElement(Result, {\n    status: \"success\",\n    title: \"Thank you for youR trust in us\",\n    subTitle: \"On your first order we would like a give you a discount of 15%, enjoy!!.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(StripePayment, {\n    total: totalValue,\n    setFinalClientSecret: setFinalClientSecret,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }\n  }))) : /*#__PURE__*/React.createElement(Result, {\n    status: \"404\",\n    title: \"404\",\n    subTitle: \"Sorry, there are no products on your cart.\",\n    extra: /*#__PURE__*/React.createElement(Link, {\n      to: `/products/${userId}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 8\n      }\n    }, \"Add Products \", /*#__PURE__*/React.createElement(PlusCircleOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 22\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default Cart;","map":{"version":3,"sources":["F:/flybuy-customer/src/components/pages/Cart/index.jsx"],"names":["React","useEffect","useState","useParams","useHistory","Card","Avatar","Row","Col","Tooltip","Tag","Carousel","message","Result","Button","Badge","Skeleton","EyeOutlined","StarTwoTone","CheckCircleTwoTone","PlusCircleOutlined","PlusCircleTwoTone","MinusCircleTwoTone","Link","StripePayment","axios","Cart","currentUser","setCurrentUser","setCartValue","history","cartList","setCartList","totalValue","setTotalValue","loading","setLoading","offersLength","setOffersLength","finalClientSecret","setFinalClientSecret","Meta","userId","getCartProducts","id","console","log","response","get","data","emptyCart","success","replace","getOrders","req","length","createOrder","post","then","res","increaseQuantity","put","decreaseQuantity","removeFromCart","delete","JSON","parse","localStorage","getItem","_id","paymentId","productsList","amount","status","admin_staus_comment","is_delivered","totalPrice","reduce","total","array","parseInt","product","product_price","quantity","maxHeight","overflow","map","item","width","margin","boxShadow","ImageURLOne","url","height","ImageURLTwo","ImageURLThree","ImageURLFour","ImageURLFive","product_rating","color","backgroundColor","product_name","product_category","category","toUpperCase","product_description"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { Card, Avatar, Row, Col, Tooltip, Tag, Carousel, message, Result, Button, Badge, Skeleton } from 'antd';\r\nimport {\r\n\tEyeOutlined,\r\n\tStarTwoTone,\r\n\tCheckCircleTwoTone,\r\n\tPlusCircleOutlined,\r\n\tPlusCircleTwoTone,\r\n\tMinusCircleTwoTone,\r\n} from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport StripePayment from '../StripePayment';\r\nimport axios from '../../../axios';\r\n\r\nconst Cart = ({ currentUser, setCurrentUser, setCartValue }) => {\r\n\tlet history = useHistory();\r\n\tconst [cartList, setCartList] = useState([]);\r\n\tconst [totalValue, setTotalValue] = useState([]);\r\n\tconst [loading, setLoading] = useState({});\r\n\tconst [offersLength, setOffersLength] = useState(0);\r\n\r\n\tconst [finalClientSecret, setFinalClientSecret] = useState();\r\n\tconst { Meta } = Card;\r\n\tconst { userId } = useParams();\r\n\tasync function getCartProducts(id) {\r\n\t\tconsole.log(`cart product`);\r\n\t\tconsole.log(`userId`, userId);\r\n\t\tconst response = await axios.get(`/user/${userId}/cart`);\r\n\t\tif (response) {\r\n\t\t\tsetCartList(response?.data);\r\n\t\t\tif (id) setLoading({ [id]: false });\r\n\t\t}\r\n\t}\r\n\tconsole.log(`totalValue`, totalValue);\r\n\tconsole.log(`cartList`, cartList);\r\n\r\n\tasync function emptyCart() {\r\n\t\tconsole.log(`to empty`);\r\n\t\tconst response = await axios.get(`/cart/${userId}/empty`);\r\n\t\tif (response) {\r\n\t\t\tsetCartValue(0);\r\n\t\t\tmessage.success('Order created successfully');\r\n\t\t\thistory.replace(`/order/user/${userId}`);\r\n\t\t} else {\r\n\t\t\tconsole.log(`no response`);\r\n\t\t}\r\n\t}\r\n\tasync function getOrders() {\r\n\t\tconst req = await axios.get(`/orders/all?user=${userId}`);\r\n\t\tif (req) {\r\n\t\t\tsetOffersLength(req?.data?.length);\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (userId) {\r\n\t\t\tgetCartProducts();\r\n\t\t\tgetOrders();\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [userId]);\r\n\r\n\tasync function createOrder(data) {\r\n\t\tconsole.log(`create a new order`);\r\n\t\tawait axios.post('/order/create', data).then((res) => {\r\n\t\t\tif (res?.data?.message) {\r\n\t\t\t\tconsole.log(`here`);\r\n\t\t\t\temptyCart();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tconsole.log(`cartList`, cartList);\r\n\r\n\tasync function increaseQuantity(id) {\r\n\t\tsetLoading({ [id]: true });\r\n\t\tawait axios.put(`/product/${id}/user/${userId}/quantity/cart?action=inc`).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log(`here`, res?.data);\r\n\r\n\t\t\t\tgetCartProducts(id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tasync function decreaseQuantity(id) {\r\n\t\tsetLoading({ [id]: true });\r\n\t\tawait axios.put(`/product/${id}/user/${userId}/quantity/cart?action=desc`).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log(`here`, res?.data);\r\n\r\n\t\t\t\tgetCartProducts(id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tasync function removeFromCart(id) {\r\n\t\tsetLoading({ [id]: true });\r\n\t\tawait axios.delete(`/product/${id}/user/${userId}/remove/cart`).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tconsole.log(`here`, res?.data);\r\n\t\t\t\tmessage.success('Product removed from the cart successfully');\r\n\t\t\t\tgetCartProducts(id);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tif (finalClientSecret) console.log(`finalClientSecret`, finalClientSecret);\r\n\t\tconst data = {\r\n\t\t\tuserId: JSON.parse(localStorage.getItem('user'))?._id,\r\n\t\t\tpaymentId: finalClientSecret,\r\n\t\t\tproductsList: cartList,\r\n\t\t\tamount: totalValue,\r\n\t\t\tstatus: 'PENDING',\r\n\t\t\tadmin_staus_comment: 'PENDING',\r\n\t\t\tis_delivered: 'N',\r\n\t\t};\r\n\t\tconsole.log(`data to add order`, data);\r\n\t\tcreateOrder(data);\r\n\t}, [finalClientSecret]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst totalPrice = cartList.reduce(function (total, array) {\r\n\t\t\tif (offersLength === 0)\r\n\t\t\t\treturn (\r\n\t\t\t\t\tparseInt((total + parseInt(array?.product?.product_price) * parseInt(array?.quantity)) * 0.15) /\r\n\t\t\t\t\t0.15\r\n\t\t\t\t);\r\n\t\t\treturn total + parseInt(array?.product?.product_price) * parseInt(array?.quantity);\r\n\t\t}, 0);\r\n\t\tsetTotalValue(totalPrice);\r\n\t}, [cartList]);\r\n\treturn (\r\n\t\t<div className=\"bg-white shadow rounded-lg p-6\">\r\n\t\t\t{cartList?.length > 0 ? (\r\n\t\t\t\t<Row gutter={[24, 24]}>\r\n\t\t\t\t\t<Col xl={8} lg={8} md={8} sm={12} xs={12} style={{ maxHeight: '530px', overflow: 'auto' }}>\r\n\t\t\t\t\t\t{cartList?.map((item) => (\r\n\t\t\t\t\t\t\t<div className=\"m-4\">\r\n\t\t\t\t\t\t\t\t<Badge.Ribbon\r\n\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer\"\r\n\t\t\t\t\t\t\t\t\ttext={\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(`1`, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveFromCart(item?.product?._id);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 300,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tmargin: '10%',\r\n\t\t\t\t\t\t\t\t\t\t\tboxShadow: '10px 14px 18px #00ff66',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tcover={\r\n\t\t\t\t\t\t\t\t\t\t\t<Carousel autoplay>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.ImageURLOne?.url && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: 300, height: 300 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"example\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item?.product?.ImageURLOne?.url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.ImageURLTwo?.url && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: 300, height: 300 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"example\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item?.product?.ImageURLTwo?.url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.ImageURLThree?.url && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: 300, height: 300 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"example\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item?.product?.ImageURLThree?.url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.ImageURLFour?.url && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: 300, height: 300 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"example\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item?.product?.ImageURLFour?.url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.ImageURLFive?.url && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: 300, height: 300 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"example\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item?.product?.ImageURLFive?.url}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Carousel>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={item?.product?.product_rating}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<StarTwoTone key=\"rating\" twoToneColor=\"yellow\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<PlusCircleTwoTone\r\n\t\t\t\t\t\t\t\t\t\t\t\ttwoToneColor=\"limegreen\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tincreaseQuantity(item?.product?._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\t\t\t\t\t\t<MinusCircleTwoTone\r\n\t\t\t\t\t\t\t\t\t\t\t\ttwoToneColor=\"red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdecreaseQuantity(item?.product?._id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item?._id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<EyeOutlined key=\"ellipsis\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>,\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Meta\r\n\t\t\t\t\t\t\t\t\t\t\tavatar={\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton loading={loading[item?.product?._id]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge count={item?.quantity}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'black',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#00ff66',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"capitalize\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tINR {item?.product?.product_price}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Skeleton>\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton loading={loading[item?.product?._id]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-full flex justify-between\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>{item?.product?.product_name}</div>{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item?.product?.product_category?.map((category) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcategory.length === 5 ? 'geekblue' : 'green';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (category === 'Children') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor = 'volcano';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (category === 'Home Accessories') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor = 'Yellow';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tag color={color} key={category}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{category.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Skeleton>\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tdescription={\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"truncate\">{item?.product?.product_description}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t\t</Badge.Ribbon>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xl={14} lg={14} md={14} sm={12} xs={12}>\r\n\t\t\t\t\t\t{offersLength === 0 && (\r\n\t\t\t\t\t\t\t<Result\r\n\t\t\t\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\t\t\t\ttitle=\"Thank you for youR trust in us\"\r\n\t\t\t\t\t\t\t\tsubTitle=\"On your first order we would like a give you a discount of 15%, enjoy!!.\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<StripePayment total={totalValue} setFinalClientSecret={setFinalClientSecret} />\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t) : (\r\n\t\t\t\t<Result\r\n\t\t\t\t\tstatus=\"404\"\r\n\t\t\t\t\ttitle=\"404\"\r\n\t\t\t\t\tsubTitle=\"Sorry, there are no products on your cart.\"\r\n\t\t\t\t\textra={\r\n\t\t\t\t\t\t<Link to={`/products/${userId}`}>\r\n\t\t\t\t\t\t\t<Button type=\"primary\">\r\n\t\t\t\t\t\t\t\tAdd Products <PlusCircleOutlined />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}